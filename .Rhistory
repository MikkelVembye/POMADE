rho = 0.7,
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
POMADE:::power_MLMA_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sample_sizes = 100,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.01,
kj = 5
)
debug(power_CE_engine)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.01,
kj = 5
)
if (length(sigma2js) != J) sigma2j <- rep(sigma2js, length.out = J)
if (length(kj) != J) kj <- rep(kj, length.out = J)
kj
debug(power_CE_engine)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sample_sizes = 100,
kj = 5
)
vectorof <- "sample sizes"
if (length(sample_sizes) != J) sample_sizes <- rep(sample_sizes, length.out = J)
if (length(kj) != J) kj <- rep(kj, length.out = J)
sample_sizes
sample_sizes <- rep(sample_sizes, length.out = J)
sample_sizes
kj <- rep(kj, length.out = J)
kj
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
sigma2j <- rep(sigma2js, length.out = J)
sigma2j
kj <- rep(kj, length.out = J)
kj
if (length(kj) != J) kj <- rep(kj, length.out = J)
kj
sigma2j <- sigma2js
sigma2j
if (length(sigma2js) != J) sigma2j <- rep(sigma2js, length.out = J)
sigma2j
sigma2j <- rep(sigma2js, length.out = J)
sigma2j
sigma2j <- sigma2js
res <- tibble()
vectorof <- "sigma2js"
tau2_e <- tau2 + omega2 * (1 - sum(1 / (kj * sigma2j^2))) / (1 - sum(1 / sigma2j^2))
wj <- 1 / (sigma2j + tau2_e)
W <- sum(wj)
var_b <- 1/W^2 * sum(wj^2 * (tau2 + rho * sigma2j + (1 / kj) * (omega2 + (1 - rho) * sigma2j)) )
lambda_CE <- (beta-d) / sqrt(var_b)
df_CE_app <- Satt_df(wj)
if ("RVE" %in% var_df){
power_CE <- power_t(df = df_CE_app, lambda = lambda_CE, alpha = alpha)
res <-
tibble(
var_b,
df = df_CE_app,
power_CE,
method = "CE-RVE"
) %>%
bind_rows(res)
} else {
stop("Made for RVE, only")
}
res %>% mutate(vectorof = vectorof)
tau2_e <- tau2 + omega2 * (1 - sum(1 / (kj * sigma2j^2))) / (1 - sum(1 / sigma2j^2))
wj <- 1 / (sigma2j + tau2_e)
W <- sum(wj)
var_b <- 1/W^2 * sum(wj^2 * (tau2 + rho * sigma2j + (1 / kj) * (omega2 + (1 - rho) * sigma2j)) )
lambda_CE <- (beta-d) / sqrt(var_b)
df_CE_app <- Satt_df(wj)
power_CE <- power_t(df = df_CE_app, lambda = lambda_CE, alpha = alpha)
power_CE
res <-
tibble(
var_b,
df = df_CE_app,
power_CE,
method = "CE-RVE"
) %>%
bind_rows(res)
res
res %>% mutate(vectorof = vectorof)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
debug(power_CE_engine)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sample_sizes = 100,
kj = 5
)
vectorof <- "sample sizes"
if (length(sample_sizes) != J) sample_sizes <- rep(sample_sizes, length.out = J)
if (length(kj) != J) kj <- rep(kj, length.out = J)
sigma2j <- 4 / sample_sizes + beta^2 / (2 * (sample_sizes - 2))
sigma2j
load_all()
load_all()
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sample_sizes = 100,
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
POMADE:::power_MLMA_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = 0.04,
kj = 5
)
load_all()
POMADE:::power_MLMA_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = rep(c(0.02, 0.04), c(35, 35)),
kj = 5
)
POMADE:::power_CE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = rep(c(0.02, 0.04), c(35, 35)),
kj = 5
)
POMADE:::power_CHE_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sigma2js = rep(c(0.02, 0.04), c(35, 35)),
kj = 5
)
install()
library(POMADE)
library(dplyr)
?traffic_light_power_plot
library(dplyr)
coteach_dat <- VWB22_pilot
dat_kjsigma2j <- dplyr::select(coteach_dat, kj, sigma2j = vg_ms_mean)
power_CHE_RVE_color_plot <-
power_plot(
J = seq(50, 100, 10),
tau2 = c(0, 0.05, 0.1, 0.2)^2,
omega2 = c(0.05, 0.15, 0.25, .35)^2,
beta = 0.1,
rho = c(.2, .4, .7, .9),
model = "CHE",
var_df = "RVE",
pilot_data_kjsigma2 = dat_kjsigma2j,
expected_studies = c(66, 86),
color = TRUE,
color_brewer = TRUE,
iterations = 1,
seed = 10052510
)
traffic_light_power_plot(
power_plot = power_CHE_RVE_color_plot,
assumptions = c("unlikely", "likely", "expected", "likely",
"unlikely", "likely", "expected", "unlikely")
)
document()
load_all()
?power_CE
balanced_CE_RVE_power <-
power_CE(
J = 50,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
var_df = "RVE",
sample_size_method = "balanced",
k_mean = 4,
N_mean = 50,
alpha = 0.05,
seed = 240222
)
balanced_CE_RVE_power
load_all()
# CE
power_MLMA_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sample_sizes = 100,
kj = 5
)
power_MLMA_engine(
J = 70,
tau2 = 0.2^2,
omega2 = 0.1^2,
beta = 0.1,
rho = 0.7,
sigma2js = 0.04,
kj = 5
)
coteach_dat <- VWB22_pilot
glimpse(coteach_dat)
dat_kjsigma2j <- dplyr::select(coteach_dat, kj, sigma2j = vg_ms_mean)
dat_kjN <- dplyr::select(coteach_dat, kj, N = ESS_meanj)
# CE
power_CE_RVE_empirical <-
power_CE(
J = 76,
tau2 = 0.1^2,
omega2 = 0.25^2,
beta = 0,
rho = 0.7,
sigma2_method = "empirical",
pilot_data_kjsigma2 = dat_kjsigma2j,
alpha = 0.05,
seed = 10052510
)
power_CE_RVE_empirical
# CE
power_CE_RVE_empirical <-
power_CE(
J = 76,
tau2 = 0.1^2,
omega2 = 0.25^2,
beta = 0.1,
rho = 0.7,
sigma2_method = "empirical",
pilot_data_kjsigma2 = dat_kjsigma2j,
alpha = 0.05,
seed = 10052510
)
power_CE_RVE_empirical
document()
load_all()
?power_plot
power_CE_RVE_color_plot <-
power_plot(
J = seq(50, 100, 10),
tau2 = c(0, 0.05, 0.1, 0.2)^2,
omega2 = c(0.05, 0.15, 0.25, .35)^2,
beta = 0.1,
rho = c(.2, .4, .7, .9),
model = "CE",
var_df = "RVE",
pilot_data_kjsigma2 = dat_kjsigma2j,
expected_studies = c(66, 86),
color = TRUE,
color_brewer = TRUE,
iterations = 1,
seed = 10052510
)
power_CE_RVE_color_plot
library(dplyr)
coteach_dat <- VWB22_pilot
dat_kjsigma2j <- dplyr::select(coteach_dat, kj, sigma2j = vg_ms_mean)
power_CE_RVE_color_plot <-
power_plot(
J = seq(50, 100, 10),
tau2 = c(0, 0.05, 0.1, 0.2)^2,
omega2 = c(0.05, 0.15, 0.25, .35)^2,
beta = 0.1,
rho = c(.2, .4, .7, .9),
model = "CE",
var_df = "RVE",
pilot_data_kjsigma2 = dat_kjsigma2j,
expected_studies = c(66, 86),
color = TRUE,
color_brewer = TRUE,
iterations = 1,
seed = 10052510
)
power_CE_RVE_color_plot
power_CE_RVE_color_plot <-
power_plot(
J = seq(50, 100, 10),
tau2 = c(0, 0.05, 0.1, 0.2)^2,
omega2 = c(0.05, 0.15, 0.25, .35)^2,
beta = 0.1,
rho = c(.2, .4, .7, .9),
model = "CE",
var_df = "RVE",
k_mean = 5, N_mean = 100,
expected_studies = c(66, 86),
color = TRUE,
color_brewer = TRUE,
iterations = 1,
seed = 10052510
)
power_CE_RVE_color_plot
